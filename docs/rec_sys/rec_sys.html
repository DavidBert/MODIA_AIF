<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Recommendation Systems - AI Frameworks</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/docco.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../index.html">AI Frameworks</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../index.html" class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Courses <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Development tools for Data Scientist</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../developpement/pytorch.html" class="dropdown-item">Introduction to Pytorch</a>
</li>
            
<li>
    <a href="../../developpement/git_intro.html" class="dropdown-item">Introduction to Git</a>
</li>
            
<li>
    <a href="../../developpement/docker.html" class="dropdown-item">Introduction to Docker</a>
</li>
            
<li>
    <a href="../../developpement/api.html" class="dropdown-item">Introduction to REST APIs</a>
</li>
            
<li>
    <a href="../../developpement/mnist.html" class="dropdown-item">Practical session 1</a>
</li>
            
<li>
    <a href="../../developpement/colorize.html" class="dropdown-item">Practical session 2</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#recommendation-systems" class="nav-link">Recommendation Systems</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#course" class="nav-link">Course:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#practical-session" class="nav-link">Practical session:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#project" class="nav-link">Project:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="recommendation-systems">Recommendation Systems</h1>
<h2 id="course">Course:</h2>
<ul>
<li><a href="https://docs.google.com/presentation/d/1xUMmOn3vUXv8YgPmvTeXMLXDcSyOB9Sa8lLL2N2AXqk/edit?usp=sharing">Slides recommender systems</a>  </li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/5TYgk0jZApc?si=NXGtORCgbxbQLJkj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Z5Vyx5AMnns?si=3Y7KOsqaoCSQRRjP" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Hs-wURnnEwg?si=pqol8S2JlmY-lnrF" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/ztMvKeSOye8?si=k75YUUHzW7bpsAq-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/eZHGfpP-FKQ?si=rTxfohLS737b1Bxq" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/fiSHiAKxuNo?si=wfZVN3ZT75reBP_U" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h2 id="practical-session">Practical session:</h2>
<ul>
<li>
<p>IMDB recommender system: <a href="https://colab.research.google.com/github/DavidBert/AIF2024/blob/main/rec_sys/recommender_systems/INSA_Reco.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
</li>
<li>
<p>Solution: <a href="https://colab.research.google.com/github/DavidBert/AIF2024/blob/solutions/rec_sys/recommender_systems/INSA_Reco_solution.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
</li>
</ul>
<h2 id="project">Project:</h2>
<p>During the practical session, you saw how to build a recommender system based on content using the movie posters.<br />
Use <code>Gradio</code> to build a web app that takes as input a movie poster and returns the images of the 5 most similar movies according to their poster.<br />
I would like you to mimic a real recommender system using a vector database.<br />
To do so I want the database to be requested by the web app through a REST API. 
The web app should be light and fast.<br />
Use a pre-trained network only to extract the vector representation of the input image and call through the REST API the annoy index you built during the practical session to find the 5 most similar movies.
<img alt="" src="schema.png" />    </p>
<p>An easy way to run both the web app and the annoy index in a single  container would consist to create a bash script that runs both the web app and the annoy index.<br />
This is not the best practice, but it might be easier for you to do so. Thus you can start with this solution and then try to run the web app and the annoy index in two different containers.</p>
<p>Here is an example of a bash script that runs both the web app and the annoy index:  </p>
<pre><code class="language-bash">#!/bin/bash
python python annoy_db.py &amp;  gradio_app.py 
</code></pre>
<p>The <code>&amp;</code> operator is used to put jobs in the background.<br />
Here the annoy index is run in the background and the web app is run in the foreground.<br />
Call this script in your docker file to run the application.</p>
<p>The good practice consists in runnnig the web app in a docker container and the annoy index in another container.<br />
To do so you can use docker-compose. 
Look at the <a href="https://docs.docker.com/compose/gettingstarted/">docker-compose documentation</a> to learn how to use it. </p>
<p>Here are the theroritical steps to follow to run the web app and the annoy index in two different containers using docker-compose.<br />
First, you need to create Dockerfiles for both the Gradio web app and the Annoy database.<br />
Then create a docker-compose.yml file to define and run the multi-container Docker applications. For exemple something like:  </p>
<pre><code class="language-yaml">version: '3.8'
services:
  gradio-app:
    build:
      context: .
      dockerfile: Dockerfile-gradio
    ports:
      - &quot;7860:7860&quot;
    depends_on:
      - annoy-db

  annoy-db:
    build:
      context: .
      dockerfile: Dockerfile-annoy
    ports:
      - &quot;5000:5000&quot;
</code></pre>
<p>Make sure in your gradion app to call the annoy database through the url <code>http://annoy-db:5000/</code> as the base URL for API requests.</p>
<p>To run the application, run the following command in the same directory as the docker-compose.yml file:</p>
<pre><code class="language-bash">docker-compose up
</code></pre>
<p>The Gradio web app should be accessible at http://localhost:7860.<br />
The Annoy database API, if it has endpoints exposed, will be accessible at http://localhost:5000.</p>
<p>To stop and remove the containers, networks, and volumes created by docker-compose up, run:</p>
<pre><code class="language-bash">docker-compose down
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../javascripts/mathjax.js"></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
